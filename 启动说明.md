# Pytest Auto API 自动化测试框架 - 启动说明

## 🚀 一键启动

### 快速开始

1. **双击运行启动脚本**
   ```
   start_services.bat
   ```

2. **等待自动化流程完成**
   - 脚本将自动检查和安装所有依赖
   - 自动启动后端和前端服务
   - 自动打开浏览器访问Web界面

3. **开始使用**
   - 前端界面：http://127.0.0.1:5173
   - 后端API：http://127.0.0.1:5000

## 📋 启动流程详解

### 第1步：Python环境检查
- ✅ 验证Python是否正确安装
- ✅ 确认Python版本兼容性（建议3.7+）
- ❌ 如果未找到Python，将提供安装指导

### 第2步：Python依赖安装
- ✅ 检查关键依赖模块（如jsonpath）
- ✅ 自动安装requirements.txt中的所有依赖
- ⚠️ 如果安装失败，提供手动安装命令

### 第3步：前端环境检查
- ✅ 验证Node.js是否正确安装
- ✅ 确认npm包管理器可用
- ❌ 如果未找到Node.js，将提供安装指导

### 第4步：启动后端服务
- 🚀 启动Flask API服务器
- 🔍 自动进行健康检查
- 📡 服务地址：http://127.0.0.1:5000

### 第5步：启动前端服务
- 🚀 启动Vue3开发服务器
- 📡 服务地址：http://127.0.0.1:5173
- 🎨 现代化Web界面

### 第6步：完成启动
- 🎉 显示启动成功信息
- 🌐 自动打开浏览器
- 💡 提供使用提示

## 🛠️ 环境要求

### 必需软件
- **Python 3.7+** 
  - 下载：https://www.python.org/downloads/
  - 安装时请勾选"Add to PATH"
- **Node.js 16+**
  - 下载：https://nodejs.org/
  - 包含npm包管理器

### 可选工具
- **Git** (用于代码管理)
- **curl** (用于服务健康检查，Windows 10+内置)

## 🔧 故障排除

### 常见问题

#### 1. Python依赖安装失败
```bash
# 手动安装依赖
pip install -r requirements.txt

# 如果网络问题，使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

#### 2. 前端依赖安装失败
```bash
# 进入前端目录
cd web_ui\frontend

# 手动安装依赖
npm install

# 如果网络问题，使用cnpm
npm install -g cnpm --registry=https://registry.npm.taobao.org
cnpm install
```

#### 3. 端口被占用
- **后端端口5000被占用**：
  - 检查是否有其他Flask应用运行
  - 可在`web_ui/backend/app.py`中修改端口
- **前端端口5173被占用**：
  - Vite会自动尝试下一个可用端口
  - 查看启动信息获取实际端口

#### 4. 服务启动后无法访问
- 检查防火墙设置
- 确认服务窗口没有错误信息
- 等待更长时间（首次启动可能较慢）

### 高级设置

#### 修改服务端口
**后端端口**：编辑`web_ui/backend/app.py`
```python
if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)  # 修改port参数
```

**前端端口**：编辑`web_ui/frontend/vite.config.js`
```javascript
export default defineConfig({
  server: {
    port: 5173  // 修改端口
  }
})
```

#### 生产环境部署
```bash
# 构建前端
cd web_ui\frontend
npm run build

# 生产环境运行后端
python web_ui/backend/app.py
```

## 📚 功能特性

### 🎯 测试用例管理
- 可视化YAML用例编辑
- 依赖关系配置
- 断言设置
- 参数化配置

### 🔧 代码自动生成
- 根据YAML自动生成pytest代码
- 支持多种断言类型
- 数据驱动测试支持

### 📊 执行监控
- 实时测试执行状态
- 详细日志查看
- 进度监控

### 📈 报告分析
- Allure测试报告
- 执行结果统计
- 历史趋势分析

## 🎨 界面预览

启动成功后，您将看到：
- 🏠 **首页**：项目概览和快速入口
- 📝 **用例管理**：YAML用例的增删改查
- ⚙️ **配置管理**：项目配置和环境设置
- 🚀 **执行中心**：测试执行和监控
- 📊 **报告中心**：测试结果和分析
- 🧰 **工具箱**：实用工具集合

## 📞 技术支持

如遇到问题：
1. 查看各服务窗口的详细错误信息
2. 参考本文档的故障排除部分
3. 查看项目README.md文档
4. 提交GitHub Issue

---

**祝您使用愉快！** 🎉 